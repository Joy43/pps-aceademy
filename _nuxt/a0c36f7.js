(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{730:function(e,t,r){e.exports=r.p+"img/LoginIng.3bb1357.png"},776:function(e,t,r){"use strict";r.r(t);r(20),r(13),r(23),r(31),r(15),r(32);var n=r(9),o=r(2),l=(r(54),r(6),r(632)),c=r(630);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}Object(c.d)("eager"),Object(c.c)("digits",m(m({},l.a),{},{message:"{_field_} needs to be {length} digits. ({_value_})"})),Object(c.c)("required",m(m({},l.e),{},{message:"{_field_} can not be empty"})),Object(c.c)("min",{validate:function(e,t){return e.length>=t.length},params:["length"]}),Object(c.c)("max",m(m({},l.c),{},{message:"{_field_} may not be greater than {length} characters"})),Object(c.c)("regex",m(m({},l.d),{},{message:"{_field_} {_value_} does not match {regex}"})),Object(c.c)("email",m(m({},l.b),{},{message:"Email must be valid"}));var f={components:{ValidationProvider:c.b,ValidationObserver:c.a},auth:"guest",data:function(){return{submittingForm:!1,formData:{name:"",phone:"",password:"",type:"nuxt"},login_errors:{},passwordRule:{required:!0},nameRule:{required:!0},phoneNumberRules:{required:!0,digits:11,regex:"^(013|015|016|017|018|019)\\d{8}$"},showPasswordField:!1,showNameField:!1,password:[function(e){return!!e||"Password is required."},function(e){return e.length>=4||"A minimum of 4 characters is allowed"},function(e){return e.length<=60||"Password must be less than 60 characters"}]}},head:function(){return{title:"Login",meta:[{hid:"description",name:"description",content:"PPS Academy is an educational platform where students get special courses, videos, Interactive live classes, notes, books, exams etc."}]}},watch:{},mounted:function(){},methods:{createOrGetUser:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.submittingForm=!0,t.next=3,e.$refs.observer.validate();case 3:if(t.sent){t.next=8;break}e.submittingForm=!1,t.next=11;break;case 8:return"login/user",t.next=11,e.$axios.$post("login/user",e.formData).then((function(t){e.showPasswordField=!0,t&&!1===t.has_password&&(e.showNameField=!0)})).catch((function(t){e.login_errors=["Something went wrong!"]})).finally((function(){e.submittingForm=!1}));case 11:case"end":return t.stop()}}),t)})))()},loginUser:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.submittingForm=!0,t.next=3,e.$refs.observer.validate();case 3:if(t.sent){t.next=8;break}e.submittingForm=!1,t.next=17;break;case 8:return t.prev=8,t.next=11,e.$auth.loginWith("auth",{data:e.formData}).then((function(t){e.$axios.setHeader("Authorization","Bearer "+t),e.$store.dispatch("cart/getDBCart"),e.$store.dispatch("userData/fetchEnrolledCourse"),e.$notifier.showMessage({content:"You are logged in!",color:"success"})})).catch((function(t){e.login_errors=["Wrong password or phone number."],t.response&&422==t.response.status&&(e.login_errors=t.response.data),console.log(e.login_errors),e.$notifier.showMessage({content:"Failed to login!",color:"error"})})).finally((function(){e.submittingForm=!1}));case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(8),e.submittingForm=!1,e.login_errors=t.t0;case 17:case"end":return t.stop()}}),t,null,[[8,13]])})))()},clear:function(){this.$refs.observer.reset()}}},v=r(112),h=r(178),w=r.n(h),x=r(555),_=r(358),y=r(359),O=r(556),F=r(597),j=r(561),k=r(413),component=Object(v.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"vH-100 vW-100"},[n("v-row",{staticClass:"mt-10"},[n("v-col",{attrs:{col:"12",lg:"6",md:"6",sm:"6"}},[n("v-card",{staticClass:"mx-auto py-6 px-6",attrs:{elevation:"1",loading:e.submittingForm,"max-width":"400","max-height":"100vh","min-height":"400px",rounded:""}},[n("div",{staticStyle:{display:"flex","justify-content":"center","align-content":"center","align-items":"center"}},[n("div",{staticClass:"mt-10 flex1"},[n("h2",{staticClass:"mb-2"},[e._v("Login / Register")]),e._v(" "),n("validation-observer",{ref:"observer"},[n("v-form",{ref:"form"},[e.login_errors&&Object.keys(e.login_errors).length?[e._l(e.login_errors,(function(t,r){return[n("v-alert",{key:r,staticStyle:{"max-width":"100%"},attrs:{type:"error"}},[e._v("\n                                            "+e._s(t)+"\n                                        ")])]}))]:e._e(),e._v(" "),n("v-row",[n("v-col",{directives:[{name:"show",rawName:"v-show",value:!e.showPasswordField,expression:"!showPasswordField"}],attrs:{cols:"12"}},[n("validation-provider",{attrs:{name:"Phone number",rules:e.phoneNumberRules},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[n("v-text-field",{attrs:{counter:11,label:"Phone Number","error-messages":r,disabled:e.submittingForm,required:""},model:{value:e.formData.phone,callback:function(t){e.$set(e.formData,"phone",t)},expression:"formData.phone"}})]}}])})],1),e._v(" "),e.showNameField?n("v-col",{attrs:{cols:"12"}},[n("validation-provider",{attrs:{name:"Name",rules:e.nameRule},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[n("v-text-field",{attrs:{label:"Name","error-messages":r,disabled:e.submittingForm,required:""},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})]}}],null,!1,875724558)})],1):e._e(),e._v(" "),e.showPasswordField?n("v-col",{attrs:{cols:"12"}},[n("validation-provider",{attrs:{name:"Password",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[n("v-text-field",{attrs:{label:"Password",hint:"At least 4 characters","error-messages":r,disabled:e.submittingForm,type:"password",required:""},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})]}}],null,!1,2018059926)})],1):e._e()],1),e._v(" "),n("div",{staticClass:"text-center mt-2"},[e.showPasswordField?n("v-btn",{staticClass:"mx-auto",attrs:{type:"submit",color:"warning",elevation:"14",rounded:"",loading:e.submittingForm},on:{click:function(t){return t.preventDefault(),e.loginUser()}}},[e._v("\n                                        Login\n                                    ")]):n("v-btn",{staticClass:"mx-auto",attrs:{type:"submit",color:"warning",elevation:"14",rounded:"",loading:e.submittingForm},on:{click:function(t){return t.preventDefault(),e.createOrGetUser()}}},[e._v("\n                                        Continue\n                                    ")])],1)],2)],1),e._v(" "),n("div",{staticClass:"text-center"},[n("nuxt-link",{attrs:{to:"/auth/recover-password"}},[n("v-btn",{staticClass:"mt-6",attrs:{"x-small":"",link:""}},[e._v("\n                                    Forgot password ?\n                                ")])],1)],1)],1)])])],1),e._v(" "),n("v-col",{attrs:{col:"12",lg:"6",md:"6",sm:"6","order-lg":"first","order-md":"first","order-sm":"first"}},[n("div",{staticClass:"text-center mt-6"},[n("img",{attrs:{src:r(730),alt:"",height:"300px"}})]),e._v(" "),n("div",{staticClass:"text-center mt-10"},[e._v("\n                Enjoy your new learning experience with us "),n("strong",{staticClass:"theme-text"},[e._v("LOGIN")]),e._v(" now\n            ")])])],1)],1)}),[],!1,null,null,null);t.default=component.exports;w()(component,{VAlert:x.a,VBtn:_.a,VCard:y.a,VCol:O.a,VForm:F.a,VRow:j.a,VTextField:k.a})}}]);